"use strict";exports.id=725,exports.ids=[725],exports.modules={1725:(e,t,r)=>{r.r(t),r.d(t,{NestedAppAuthController:()=>T});var n=r(7472),o=r(470),i=r(7085),s=r(2307),a=r(7237),c=r(6329),u=r(604),d=r(4573),l=r(9258),p=r(6976),h=r(2630),A=r(4318),g=r(7442),E=r(9887);/*! @azure/msal-browser v3.14.0 2024-05-07 */let v={UserInteractionRequired:"USER_INTERACTION_REQUIRED",UserCancel:"USER_CANCEL",NoNetwork:"NO_NETWORK",TransientError:"TRANSIENT_ERROR",PersistentError:"PERSISTENT_ERROR",Disabled:"DISABLED",AccountUnavailable:"ACCOUNT_UNAVAILABLE",NestedAppAuthUnavailable:"NESTED_APP_AUTH_UNAVAILABLE"};/*! @azure/msal-browser v3.14.0 2024-05-07 */class m{constructor(e,t,r,n){this.clientId=e,this.clientCapabilities=t,this.crypto=r,this.logger=n}toNaaTokenRequest(e){let t;t=void 0===e.extraQueryParameters?new Map:new Map(Object.entries(e.extraQueryParameters));let r=new c.H().addClientCapabilitiesToClaims(e.claims,this.clientCapabilities),n=e.scopes||u.f_;return{platformBrokerId:e.account?.homeAccountId,clientId:this.clientId,authority:e.authority,scope:n.join(" "),correlationId:void 0!==e.correlationId?e.correlationId:this.crypto.createNewGuid(),claims:d.x.isEmptyObj(r)?void 0:r,state:e.state,authenticationScheme:e.authenticationScheme||u.hO.BEARER,extraParameters:t}}fromNaaTokenResponse(e,t,r){if(!t.token.id_token||!t.token.access_token)throw(0,l.zP)(p.PM);let n=new Date((r+(t.token.expires_in||0))*1e3),o=h.Z_(t.token.id_token,this.crypto.base64Decode),i=this.fromNaaAccountInfo(t.account,o),s=t.token.scope||e.scope;return{authority:t.token.authority||i.environment,uniqueId:i.localAccountId,tenantId:i.tenantId,scopes:s.split(" "),account:i,idToken:t.token.id_token,idTokenClaims:o,accessToken:t.token.access_token,fromCache:!0,expiresOn:n,tokenType:e.authenticationScheme||u.hO.BEARER,correlationId:e.correlationId,extExpiresOn:n,state:e.state}}fromNaaAccountInfo(e,t){let r=t||e.idTokenClaims,n=e.localAccountId||r?.oid||r?.sub||"",o=e.tenantId||r?.tid||"",i=e.homeAccountId||`${n}.${o}`,s=e.username||r?.preferred_username||"",a=e.name||r?.name;return{homeAccountId:i,environment:e.environment,tenantId:o,username:s,localAccountId:n,name:a,idToken:e.idToken,idTokenClaims:r}}fromBridgeError(e){if(void 0===e.status)return new E.l4("unknown_error","An unknown error occurred");switch(e.status){case v.UserCancel:return new l.er(p.$R);case v.NoNetwork:return new l.er(p.Mq);case v.AccountUnavailable:return new l.er(p.cX);case v.Disabled:return new l.er(p.Ls);case v.NestedAppAuthUnavailable:return new l.er(e.code||p.Ls,e.description);case v.TransientError:case v.PersistentError:return new A.n(e.code,e.description);case v.UserInteractionRequired:return new g.Yo(e.code,e.description);default:return new E.l4(e.code,e.description)}}}/*! @azure/msal-browser v3.14.0 2024-05-07 */let C={unsupportedMethod:{code:"unsupported_method",desc:"The PKCE code challenge and verifier could not be generated."}};class k extends E.l4{constructor(e,t){super(e,t),Object.setPrototypeOf(this,k.prototype),this.name="NestedAppAuthError"}static createUnsupportedError(){return new k(C.unsupportedMethod.code,C.unsupportedMethod.desc)}}var w=r(7208),I=r(6213);/*! @azure/msal-browser v3.14.0 2024-05-07 */class T{constructor(e){this.operatingContext=e;let t=this.operatingContext.getBridgeProxy();if(void 0!==t)this.bridgeProxy=t;else throw Error("unexpected: bridgeProxy is undefined");this.config=e.getConfig(),this.logger=this.operatingContext.getLogger(),this.performanceClient=this.config.telemetry.client,this.browserCrypto=e.isBrowserEnvironment()?new a.Q(this.logger,this.performanceClient):n.d,this.eventHandler=new w.b(this.logger,this.browserCrypto),this.nestedAppAuthAdapter=new m(this.config.auth.clientId,this.config.auth.clientCapabilities,this.browserCrypto,this.logger)}getBrowserStorage(){throw k.createUnsupportedError()}getEventHandler(){return this.eventHandler}static async createController(e){return Promise.resolve(new T(e))}initialize(){return Promise.resolve()}ensureValidRequest(e){return e?.correlationId?e:{...e,correlationId:this.browserCrypto.createNewGuid()}}async acquireTokenInteractive(e){let t=this.ensureValidRequest(e);this.eventHandler.emitEvent(I.t.ACQUIRE_TOKEN_START,s.s_.Popup,t);let r=this.performanceClient.startMeasurement(o.Ak.AcquireTokenPopup,t.correlationId);r?.add({nestedAppAuthRequest:!0});try{let e=this.nestedAppAuthAdapter.toNaaTokenRequest(t),n=i.HY(),o=await this.bridgeProxy.getTokenInteractive(e),a=this.nestedAppAuthAdapter.fromNaaTokenResponse(e,o,n);return this.operatingContext.setActiveAccount(a.account),this.eventHandler.emitEvent(I.t.ACQUIRE_TOKEN_SUCCESS,s.s_.Popup,a),r.add({accessTokenSize:a.accessToken.length,idTokenSize:a.idToken.length}),r.end({success:!0,requestId:a.requestId}),a}catch(t){let e=this.nestedAppAuthAdapter.fromBridgeError(t);throw this.eventHandler.emitEvent(I.t.ACQUIRE_TOKEN_FAILURE,s.s_.Popup,null,t),r.end({success:!1},t),e}}async acquireTokenSilentInternal(e){let t=this.ensureValidRequest(e);this.eventHandler.emitEvent(I.t.ACQUIRE_TOKEN_START,s.s_.Silent,t);let r=this.performanceClient.startMeasurement(o.Ak.SsoSilent,t.correlationId);r?.increment({visibilityChangeCount:0}),r?.add({nestedAppAuthRequest:!0});try{let e=this.nestedAppAuthAdapter.toNaaTokenRequest(t),n=i.HY(),o=await this.bridgeProxy.getTokenSilent(e),a=this.nestedAppAuthAdapter.fromNaaTokenResponse(e,o,n);return this.operatingContext.setActiveAccount(a.account),this.eventHandler.emitEvent(I.t.ACQUIRE_TOKEN_SUCCESS,s.s_.Silent,a),r?.add({accessTokenSize:a.accessToken.length,idTokenSize:a.idToken.length}),r?.end({success:!0,requestId:a.requestId}),a}catch(t){let e=this.nestedAppAuthAdapter.fromBridgeError(t);throw this.eventHandler.emitEvent(I.t.ACQUIRE_TOKEN_FAILURE,s.s_.Silent,null,t),r?.end({success:!1},t),e}}async acquireTokenPopup(e){return this.acquireTokenInteractive(e)}acquireTokenRedirect(e){throw k.createUnsupportedError()}async acquireTokenSilent(e){return this.acquireTokenSilentInternal(e)}acquireTokenByCode(e){throw k.createUnsupportedError()}acquireTokenNative(e,t,r){throw k.createUnsupportedError()}acquireTokenByRefreshToken(e,t){throw k.createUnsupportedError()}addEventCallback(e){return this.eventHandler.addEventCallback(e)}removeEventCallback(e){this.eventHandler.removeEventCallback(e)}addPerformanceCallback(e){throw k.createUnsupportedError()}removePerformanceCallback(e){throw k.createUnsupportedError()}enableAccountStorageEvents(){throw k.createUnsupportedError()}disableAccountStorageEvents(){throw k.createUnsupportedError()}getAccount(e){throw k.createUnsupportedError()}getAccountByHomeId(e){let t=this.operatingContext.getActiveAccount();return void 0===t?null:t.homeAccountId===e?this.nestedAppAuthAdapter.fromNaaAccountInfo(t):null}getAccountByLocalId(e){let t=this.operatingContext.getActiveAccount();return void 0===t?null:t.localAccountId===e?this.nestedAppAuthAdapter.fromNaaAccountInfo(t):null}getAccountByUsername(e){let t=this.operatingContext.getActiveAccount();return void 0===t?null:t.username===e?this.nestedAppAuthAdapter.fromNaaAccountInfo(t):null}getAllAccounts(){let e=this.operatingContext.getActiveAccount();return void 0!==e?[this.nestedAppAuthAdapter.fromNaaAccountInfo(e)]:[]}handleRedirectPromise(e){return Promise.resolve(null)}loginPopup(e){return this.acquireTokenInteractive(e||s.yo)}loginRedirect(e){throw k.createUnsupportedError()}logout(e){throw k.createUnsupportedError()}logoutRedirect(e){throw k.createUnsupportedError()}logoutPopup(e){throw k.createUnsupportedError()}ssoSilent(e){return this.acquireTokenSilentInternal(e)}getTokenCache(){throw k.createUnsupportedError()}getLogger(){return this.logger}setLogger(e){this.logger=e}setActiveAccount(e){this.logger.warning("nestedAppAuth does not support setActiveAccount")}getActiveAccount(){let e=this.operatingContext.getActiveAccount();return void 0!==e?this.nestedAppAuthAdapter.fromNaaAccountInfo(e):null}initializeWrapperLibrary(e,t){}setNavigationClient(e){this.logger.warning("setNavigationClient is not supported in nested app auth")}getConfiguration(){return this.config}isBrowserEnv(){return this.operatingContext.isBrowserEnvironment()}getBrowserCrypto(){return this.browserCrypto}getPerformanceClient(){throw k.createUnsupportedError()}getRedirectResponse(){throw k.createUnsupportedError()}async clearCache(e){throw k.createUnsupportedError()}async hydrateCache(e,t){throw k.createUnsupportedError()}}}};